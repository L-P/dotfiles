# Scarcely used (see `update-alternatives --config editor`)
export EDITOR=vim

# VIM may complain if the folder does not exist
mkdir ~/.vim/undo > /dev/null 2>&1

# More secure umask by default
umask u+rw,go-rwx


# Nicer less by default
export LESS='-RFXS -x4'
export PAGER='less'
export MANPAGER='less'


# Color aliases
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
alias tree='tree -C'

# Aliases
alias mysql='mysql --user=root --password=root'
alias mysqladmin='mysqladmin --user=root --password=root'
alias mytop='mytop -u root -p root'
alias ls='ls --group-directories-first --color -v'
alias ll='ls -vlh'
alias la='ll -va'
alias mkdir='mkdir -pv'
alias rm='rm --preserve-root'
alias gd='git diff'
alias gds='git diff --staged'
alias gs='git status --short'
alias py='python3'
alias ripit='ripit -o /dev/shm/ripit -c 2 -q 8' # FLAC @ max comp.
alias json='json_reformat | pygmentize -l js' # json is on pygments â‰¥ 1.5

# Nicer du (ncdu is nice too)
function duf {
	du -csh -- "$@" | sort -rh
}

# Handy grep aliases, since ack sucks.
function g() {
	grep --color=always -EHnr --exclude='*.dat' --exclude-dir='.svn' --exclude-dir='.git' $@ . | $PAGER ;
}
function gi() {
	grep --color=always -EHnri --exclude='*.dat' --exclude-dir='.svn' --exclude-dir='.git' $@ . | $PAGER ;
}

# Find aliases
function f() { find . -iname "*$@*" }
function ff() { find . -type f -iname "*$@*" }
function fd() { find . -type d -iname "*$@*" }

# Nice SVN diff (much like git diff)
function sd() {
	arg=''
	if [[ -n $1 ]]; then
		arg="-c $1"
	fi
	svn diff $arg | pygmentize -l diff | $PAGER
}

# Record terminal input/output to file.
function record() {
	local date="$(date --rfc-3339=seconds | sed 's/ /_/g')"
	local dir="$HOME/.terminal_recordings"
	mkdir -p "$dir" &> /dev/null
	script -t "$dir/script_$date" 2> "$dir/timing_$date"
}

/usr/bin/keychain $HOME/.ssh/* &> /dev/null
source $HOME/.keychain/$HOST-sh &> /dev/null

